---
title: Benachrichtigungen
description: Benachrichtigungen versenden
icon: notifications
status:
lang: de
---

# Benachrichtigungen

In diesem Artikel beschreiben wir das Benachrichtigungsmodul, das dafür gedacht ist, unterschiedliche Daten in der IT-Dokumentation zu prüfen und bei Eintreten von gewissen Ereignissen E-Mails zu versenden. Es besteht aus den jeweiligen [Benachrichtigungsarten](./benachrichtigungen.md#benachrichtigungsarten), der [Einrichtung](./benachrichtigungen.md#einrichtung) dieser, den [E-Mail-Vorlagen](./benachrichtigungen.md#e-mail-vorlagen) und letztendlich einer regelmäßigen Ausführung des [Console.php](./benachrichtigungen.md#konfiguration-des-aufrufs-mit-der-i-doit-console).

!!! info "Ein Praxisbeispiel finden Sie auf unserem [Blog](https://www.i-doit.com/blog/benachrichtigungen-und-eskalationsstufen-mit-i-doit/)"

## Benachrichtigungsarten

Die Konfiguration findet unter **Extras → Benachrichtigungen** statt. Als Benachrichtigungsarten stehen aktuell die folgenden zur Auswahl:

| Benachrichtigung                     | Beschreibung                                                                                                                                                                                                                                                                                               |
| ------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Ablauf einer Kündigungsfrist         | Prüft Verträge auf die Zeitspanne bis zum Ablauf der Kündigungsfrist.                                                                                                                                                                                                                                      |
| Ablauf einer Wartungs-/Garantiefrist | Prüft Verträge auf die Zeitspanne bis zum Ablauf der Wartungs-/Garantiefrist.                                                                                                                                                                                                                              |
| Ablauf einer Zertifikatsfrist        | Prüft alle Objekttypen, denen die Kategorie "Zertifikat" zugewiesen ist, auf das Ablaufdatum des Zertifikats.                                                                                                                                                                                              |
| CMDB-Status endet                    | Für die Kategorie "Status-Planung" hilfreich. Hier wird vor der zu endenden geplanten Änderung des CMDB-Status benachrichtigt.                                                                                                                                                                             |
| CMDB-Status startet                  | Für die Kategorie "Status-Planung" hilfreich. Hier wird vor der zu startenden geplanten Änderung des CMDB-Status benachrichtigt.                                                                                                                                                                           |
| Freie Lizenzen                       | Prüft Lizenzen auf die Anzahl der restlichen/verfügbaren Lizenzen.                                                                                                                                                                                                                                         |
| Gelagerte Objekte                    | Prüft beliebige Objekttyp auf die Anzahl der darin befindlichen Objekte mit dem Status "Gelagert".                                                                                                                                                                                                         |
| i-doit Update                        | Prüft, ob eine neue Version von i-doit verfügbar ist. Dafür benötigt i-doit einen Zugang zum Internet.                                                                                                                                                                                                     |
| Lizenzablauf                         | Prüft Lizenzen auf die Zeitspanne bis zum Ablaufdatums. Damit nicht über abgelaufene Lizenzen benachrichtigt wird, muss die Option [Abgelaufene Lizenzen überspringen](../administration/verwaltung/mandanten-name-verwaltung/einstellungen-mandanten-name.md#benachrichtigungen) auf `Ja` gesetzt werden. |
| Reportbasierte Benachrichtigung      | Führt Reports aus und benachrichtigt beim Fund einer überschrittenen, selbst definierten Anzahl an gefundenen Objekten.                                                                                                                                                                                    |
| Unveränderte Objekte                 | Prüft Objekte, die in einem selbst definierten Zeitraum nicht verändert wurden. Kann behilflich dabei sein, sehr alte Daten zu finden und in Prozessen aktualisieren zu lassen.                                                                                                                            |
| Veränderte Objekte                   | Prüft auf Objekte, die in dem vergangenen, selbst definierten Zeitraum bis Ausführung der Benachrichtigung geändert wurden. Es kann beispielsweise täglich eine Liste mit den in den letzten 24 Stunden geänderten Objekten ausgegeben werden.                                                             |

!!! info "Die "Reportbasierte Benachrichtigung" ist sehr flexibel einsetzbar und kann bei fast allen Events und Zuständen passende Benachrichtigungen versenden."

## Einrichtung

Die Konfiguration von Benachrichtigungen folgt immer dem gleichen Schema. Es werden allgemeine Parameter wie Schwellenwert, maximale Anzahl zu sendender Benachrichtigungen, zu überwachende Objekte und zu benachrichtigende Kontakte konfiguriert.

### Allgemeine Einstellungen

| Einstellungen                               | Beschreibung                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Bezeichnung                                 | Die Bezeichnung sollte bestenfalls aussagekräftig sein.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Aktiv                                       | Hier kann für die Aktivierung die Checkbox angeklickt werden. Benachrichtigungen können darüber deaktiviert werden.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Schwellwert                                 | Der Schwellwert variiert, je nachdem ob ein zeitlicher Faktor (X Jahre/Monate/Tage/Stunden/Minuten/Sekunden) oder ein Zähler (Anzahl gefundener Objekte) für die Benachrichtigung eingerichtet werden kann. Oberhalb der Einstellungen ist eine kurze Erklärung der Benachrichtigung sowie die Information, was mit dem Schwellwert geprüft wird, hinterlegt.                                                                                                                                                                                                                                                                                                                    |
| Max. Anzahl zu sendender Benachrichtigungen | Wird die Benachrichtigung mehrfach geprüft und mehrfach ein Objekt gefunden, kann hier ein Limit gesetzt werden, nach dem nicht weiter benachrichtigt wird. Alles kleiner gleich 0 bedeutet, es wird so lange benachrichtigt, bis das/die Objekt/e geändert wurde/n und die Benachrichtigung nicht weiter gültig ist. Beispiel: Wird jeden Tag geprüft und benachrichtigt und es ist in dem Feld eine 5 eingetragen, wird nach 5 Tagen nicht weiter benachrichtigt.<br> Wird zwischenzeitlich oder nach der maximalen Anzahl der Benachrichtigungen das Objekt so aktualisiert, dass es nicht mehr über die Benachrichtigung gefunden wird, wird der Zähler auf 0 zurückgesetzt. |
| Anzahl gesendeter Benachrichtigungen        | Die hier ausgegebene Anzeige ist rein informativ und wird bei jedem Durchlauf entweder erhöht, wenn eine Benachrichtigung verschickt wurde, oder zurückgesetzt, wenn keine verschickt wurde.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Datum des letzten Durchlaufs                | Ebenfalls rein informativ. Zeigt, wann das letzte Mal geprüft wurde.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Startdatum des Intervall                    | Bei diesem Feld kann ein Datum ausgewählt werden, das Datum ist das Startdatum für den Intervall.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Intervallkonfiguration                      | Dieses Feld dient zur Konfiguration des Intervalls, ist kein Intervall gesetzt wird dies im Feld mit "Kein Intervall definiert" dargestellt. Intervalle lassen sich z.B. Täglich oder Wöchentlich etc. wiederholen. Außerdem lässt ein ende des Intervalls konfigurieren.                                                                                                                                                                                                                                                                                                                                                                                                        |
| Englisches Template                         | Das ausgewählte Template wird für Benachrichtigungen in englischer Sprache genutzt.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Deutsches Template                          | Das ausgewählte Template wird für Benachrichtigungen in deutscher Sprache genutzt.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Beschreibung                                | Dieses Feld ist ein Freitextfeld für einen Beschreibungstext der Benachrichtigung.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

### Domänen

Aus den Bereichen können gezielt oder nach einem Schema gesammelt Objekte ausgewählt werden, die durch die Benachrichtigung geprüft werden sollen.

| Benachrichtigung               | Beschreibung                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Objekte                        | Es können über die Lupe ein oder mehrere Objekte ausgewählt werden.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Objekttypen                    | Hierüber können alle Objekte eines oder mehrerer hier ausgewählten Objekttypen überprüft werden.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Reports                        | Mit einem Report kann noch gezielter benachrichtigt werden. Beispiel: Es soll geprüft werden, ob es noch genug freie Lizenzen gibt, die mehr als 150€ pro Stück kosten, da dort ein längerer Prozess zu beachten ist, als bei günstigeren Lizenzen. Ein zweiter Report kann dann erstellt und in einer anderen Benachrichtigung verwendet werden, um die günstigeren abzufragen und zu einem anderen, vielleicht späteren Zeitpunkt, zu benachrichtigen. Bitte hier auch unbedingt auf die Domäne und die in den abgefragten Objekttypen zugewiesenen Kategorien achten! |
| Nur Objekte mit Status "Normal | Ist diese Option auf Ja gestellt werden nur noch Objekte im Report dargestellt die den [Zustand](../grundlagen/lebens-und-dokumentationszyklus.md#zustände) Normal besitzen.                                                                                                                                                                                                                                                                                                                                                                                             |

!!! info "Je nach Benachrichtigung werden nur bestimmte Objekttypen unterstützt. Beispielsweise dürfen bei Prüfung von Verträgen nur Objekte vom Typ "Vertrag" und bei Prüfung von Lizenzen nur Objekte vom Typ "Lizenz" angegeben werden."

### Empfänger

Bei den Empfängern kann ebenfalls gezielt oder gesammelt benachrichtigt werden.

| Einstellungen                          | Beschreibung                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| -------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Zugewiesene Rollen                     | Wird ein Objekt mit der konfigurierten Benachrichtigung gefunden, kann hierüber der diesem Objekt zugewiesene Kontakt in der hier eingestellten Rolle benachrichtigt werden.<br>Beispiel: Bei Verträgen kann der unter dem Vertrag über die Kategorie "Kontaktzuweisung" dokumentierte Kontakt mit der Rolle "Vertragspartner" benachrichtigt werden.<br> Kontaktpersonen die via Kontaktzuweisung -> Rolle benachrichtigt werden erhalten auch nur die Informationen zu diesem Objekt. |
| Zugewiesene Kontakte                   | Es kann auch ein oder mehrere Kontakte bzw. ein oder mehrere Personengruppen oder Organisationen benachrichtigt werden. Wichtig hierbei ist eine zu jedem Kontaktobjekt hinterlegte E-Mail-Adresse.<br>Hier zugewiesene Kontakte werden immer und über alle Objekte benachrichtigt                                                                                                                                                                                                      |
| Strategie zur Berechnung der Empfänger | Genutzte Berechnungsstrategie der Empfänger bei der **Auflösung von Personengruppen** zu Personen. Diese Einstellung betrifft nur Personengruppen die als Kontakt zugewiesen sind.                                                                                                                                                                                                                                                                                                      |

| Strategie zur Berechnung der Empfänger                     | Beschreibung                                                                                                                                                                                                                                             |
| ---------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| -                                                          | Dies is der Standard = Gruppen falls E-Mail vorhanden, sonst zugewiesene Personen                                                                                                                                                                        |
| Gruppen falls E-Mail vorhanden, sonst zugewiesene Personen | Wenn die Personengruppe eine primäre E-Mail Adresse hinterlegt hat wird diese benachrichtigt.<br>Wenn die Personengruppe KEINE primäre E-Mail Adresse hinterlegt hat, werden die primären E-Mail Adressen der Personengruppen Mitglieder benachrichtigt. |
| Gruppen und Personen                                       | Es werden die primären E-Mail Adressen der Personengruppen und der Personengruppen Mitglieder benachrichtigt.                                                                                                                                            |
| Nur Gruppen                                                | Personengruppen mit einer primären E-Mail Adresse werden benachrichtigt.                                                                                                                                                                                 |
| Nur Personen                                               | Personengruppen Mitglieder mit einer primären E-Mail Adresse werden benachrichtigt.                                                                                                                                                                      |

### E-Mail-Vorlagen

Im linken Navigationsbaum können die jeweiligen Vorlagen für die Benachrichtigung ausgewählt und für die Sprachen Deutsch und Englisch angepasst werden. Dies gilt immer global für alle Benutzer und sollte daher nicht zu spezifisch angepasst werden. Ob die deutsche oder englische Benachrichtigung versendet wird, hängt von der eingestellten Sprache des zu benachrichtigenden Kontakts ab. Hat sich dieser noch nie in i-doit angemeldet, wird die Benachrichtigung in der [Standard-Sprache](../administration/verwaltung/mandanten-name-verwaltung/einstellungen-mandanten-name.md#sprache) versendet.

| Einstellungen         | Beschreibung                                                                                                                                           |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Sprache               | Es wird die Sprache angezeigt, die gerade bearbeitet wird.                                                                                             |
| Betreff               | Der Betreff der zu verschickenden Nachricht kann mit Platzhaltern aus dem unteren Bereich der Oberfläche selbst definiert werden.                      |
| Benachrichtigungstext | Der Text kann, wie auch der Betreff, mit Platzhaltern zusammengestellt werden.                                                                         |
| Report                | Ein Report kann hier definiert werden, mit dem in der E-Mail die in der Benachrichtigung gefundenen Objektinformationen aufbereitet verschickt werden. |

## Konfiguration des Aufrufs mit CLI

Damit die eingerichteten Benachrichtigungen auch regelmäßig überprüft werden, muss die i-doit [CLI](../automatisierung-und-integration/cli/console/index.md) mit dem Command **[notifications-send](../automatisierung-und-integration/cli/console/befehle-und-optionen.md#OptionenundParameterderConsole-notifications-send)** zum Beispiel als [Cronjob](../wartung-und-betrieb/cronjobs-einrichten.md) ausgeführt werden. Es lässt sich jede Benachrichtigung einzeln abrufen. Sinnvoll ist es, zu überlegen, wie oft maximal geprüft werden soll. Bewährt hat es sich unserer Erfahrung nach täglich kurz vor Arbeitsbeginn zu prüfen, damit morgens sofort klar ist, womit man sich den Tag über beschäftigen sollte.

!!! info "Ohne einen Aufruf des Commands über die i-doit CLI findet **kein** Versand der Benachrichtigungen statt!"

Die Möglichen Parameter sowie ein Beispielaufruf für den Versand der Benachrichtigungen sind im [entsprechenden Artikel](../automatisierung-und-integration/cli/console/befehle-und-optionen.md) für den Command **[notifications-send](../automatisierung-und-integration/cli/console/befehle-und-optionen.md#notifications-send)** zu finden.

!!! info "Mit dem Benachrichtigungsmodul lassen sich Eskalationsstufen abbilden. Dazu ist nötig, für dieselben Benachrichtigungsarten mehrere Benachrichtigungen mit verschiedenen Empfängerkreisen und Schwellwerten einzurichten."

**Beispiel zur Verwendung**

```shell
sudo -u www-data php console.php notifications-send --user admin --password admin --tenantId 1
```

## Logging

Beim Aufruf des CLI Befehls [notifications-send](../automatisierung-und-integration/cli/console/befehle-und-optionen.md#notifications-send) wird eine Logdatei erstellt. Die Datei mit der Bezeichnung `notifications_YYYY-MM-DD.log` ist im i-doit `log` Ordner zu finden.
